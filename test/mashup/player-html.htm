<!doctype html>
<html>
    <head>
        <title>Preuve de concept Mashup</title>
        <link rel="stylesheet" type="text/css" href="style.css" />
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <script type="text/javascript" src="../metadataplayer/LdtPlayer-core.js" type="text/javascript"></script>
    </head>
    <body>
        <div class="main-container">
            <div class="header">
                <h1>Hash Cut #</h1>
            </div>
            <div class="steps">
                <h2>Créer un Hash-cut en 3 étapes&nbsp;:</h2>
                <div class="steps-frame">
                    <div class="step">
                        <div class="step-icon step-1"></div>
                        <div class="step-title">S'inscrire et<br />créer un projet</div>
                    </div>
                    <div class="step-separator"></div>
                    <div class="step">
                        <div class="step-icon step-2"></div>
                        <div class="step-title">Découper et<br />Assembler</div>
                    </div>
                    <div class="step-separator"></div>
                    <div class="step active">
                        <div class="step-icon step-3"></div>
                        <div class="step-title">Partager et<br />regarder&nbsp;!</div>
                    </div>
                </div>
            </div>
            <div class="colgauche">
                <h2>Mon HashCut (ne fonctionne pas avec Firefox)</h2>
                <hr />
                <div id="LdtPlayer"></div>
            </div>
            <div class="coldroite">
                <div id="mediaList"></div>
                <h2>Annotations</h2>
                <hr />
                <div id="annotationList"></div>
            </div>
            <div class="footer">
                <hr />
                <p style="text-align: right;">&copy; IRI 2012</p>
            </div>
        </div>
    <script type="text/javascript">

IriSP.libFiles.defaultDir = "../libs/";
IriSP.widgetsDir = "../metadataplayer";
IriSP.language = 'fr';
var _metadata = {
//    url: 'bab_files/mashup.json',
//    url: 'http://ldt.iri.centrepompidou.fr/ldtplatform/ldt/cljson/id/b2754186-a0c9-11e0-b8bd-00145ea49a02?callback=?',
    url: 'http://ldt.iri.centrepompidou.fr/ldtplatform/ldt/cljson/id/5afd8bbe-9b75-11e1-9e5d-00145ea4a2be?callback=?',
    format: 'ldt'
};
var _canPlayMp4 = document.createElement('video').canPlayType('video/mp4');
var _config = {
    gui: {
        width : 630,
        container : 'LdtPlayer',
        default_options: {
            metadata: _metadata
        },
        css : '../metadataplayer/LdtPlayer-core.css',
        widgets: [
            { type: "Slider" },
            { type: "Controller" },
            {
                type: "Segments",
                annotation_type: false
            },
            { type: "Arrow" },
            {
                type: "Annotation",
                annotation_type: false
            },
            {
                type: "Tagger",
                api_endpoint: "../post-test.php",
                tags: ["actif","amour","bonheur","captif","charité","désir","dieu","doute","famille","idéal","internationale","passif","patrie","peur","politique","président","spleen","travail"]
            },
            {
                type: "MediaList",
                container: "mediaList"
            },
            {
                type: "AnnotationsList",
                container: "annotationList",
                //ajax_url: "http://ldt.iri.centrepompidou.fr/ldtplatform/api/ldt/segments/{{media}}/{{begin}}/{{end}}?callback=?",
                //ajax_granularity: 30000,
                //limit_count: 3
            },
            { type: "Mediafragment" }
        ]
    },
    player:{
        type:'mashup-html',
        url_transform: function(_url) {
            var _transformed = _url.replace(/^rtmp:\/\/media.iri.centrepompidou.fr\/ddc_player\/(mp4:)?video\//i,"http://media.iri.centrepompidou.fr/video/");
            if (!/\.mp4$/.test(_transformed)) {
                _transformed += '.mp4';
            }
            if (_canPlayMp4 == "") {
                _transformed = _transformed.replace(/\.mp4$/i,'.ogv');
            }
            return _transformed;
        },
        height: 350,
        width: 630,
        metadata: _metadata
    }
};

_myPlayer = new IriSP.Metadataplayer(_config);

    </script>
    </body>
</html>