<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html dir="ltr" xml:lang="fr" xmlns="http://www.w3.org/1999/xhtml" lang="fr">

<head>

</head>

<body>

	<div style="width:650px;font-family: 'Trebuchet MS', 'Helvetica', 'Arial',  'Verdana', 'sans-serif';">
	<h1>MetaDataPlayer </h1>
	Test d'intégration de gestionnaire de placement.
	</div>
	
	
 <!-- START Integration  ###################################### -->
 <!-- SIMPLE PLAYER EXPERIMENTATION -->
	<script type="text/javascript" src="../../build/LdtPlayer-release.js" type="text/javascript"></script> 
	<script src="../../res/js/jquery.min.js" type="text/javascript"></script>
	<script src="../../res/js/jquery.tools.min.js" type="text/javascript"></script>
	<script src="../../res/js/jquery-ui.min.js" type="text/javascript"></script>
	
	<div id="video"></div>
	<div id="LdtPlayer"></div>
	
	<script  type="text/javascript">
		$(document).ready(function() {
		var config = {						
				gui:{
						width:650,
						height:480,							
						container:'LdtPlayer',
						css:'../../src/css/LdtPlayer.css',
              widgets: [
                {type: "IriSP.PlayerWidget", // please note that type refers directly to the constructor of the widget.
                 metadata:{
                  format:'cinelab',
                  src:'test.json',
                  load:'json'}
                },
               {type: "IriSP.SegmentsWidget", 
                 metadata:{
                  format:'cinelab',
                  src:'test.json',
                  load:'json'}
                },
               {type: "IriSP.AnnotationsWidget", 
                 metadata:{
                  format:'cinelab',
                  src:'test.json',
                  load:'json'}
                },
              ]
			player:{
			type:'jwplayer', // player type
              container: '#PopcornContainer'
              // the rest is player-dependent configuration options.
              file : "video/franceculture/franceculture_retourdudimanche20100620.flv", 
              streamer: "rtmp://media.iri.centrepompidou.fr/ddc_player/", 
              flashplayer : '../libs/player.swf',
              live: true, 
              "controlbar.position" : "none", 
              height: 300, 
              width: 200, 
              provider: "rtmp" 
            }
		};
		
		IriSP.loadLibs(IriSP.lib, config.gui.css, function() {});
		var pop = Popcorn.jwplayer( '#video', "",{file : "video/franceculture/franceculture_retourdudimanche20100620.flv", streamer: "rtmp://media.iri.centrepompidou.fr/ddc_player/", flashplayer : config.player.src,
                                     live: true, "controlbar.position" : "none", height: config.gui.height, width: config.gui.width, provider: "rtmp"});
		
		var dt = new IriSP.DataLoader();
		var ser = new IriSP.JSONSerializer(dt, "../test.json");
		var ser2 = new IriSP.JSONSerializer(dt, "../test.json");
		
		var lay = new IriSP.LayoutManager({divId : "LdtPlayer"});
		lay.setPopcornInstance(pop);
		
		config.gui.container = lay.createDiv();
		var player = new IriSP.PlayerWidget(pop, config.gui, ser);
		
		config.gui.container = lay.createDiv();
		var annotationWidget = new IriSP.AnnotationsWidget(pop, config.gui, ser);
		
		config.gui.container = lay.createDiv();
		var segmentsWidget = new IriSP.SegmentsWidget(pop, config.gui, ser);
		ser.sync(function() { player.draw();  annotationWidget.draw(); segmentsWidget.draw();});
		});
	</script>
	
	
 </body>
 </html>